<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fishing Simulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            align-items: center;
            padding: 0;
            background-image: url('https://raw.githubusercontent.com/alternatebummer/games/main/fishingsim/headerbgrepeat.png');
            background-repeat: repeat-x;
            background-size: auto;
            height: 100vh; /* Set the height of the page */
        }
        #game {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 20px;
        }
        #info {
            position: absolute;
            top: 10px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 18px;
            left: 10px;
        }
        #actions {
            margin-top: 20px;
        }
        #inventory {
            margin-top: 20px;
        }
        .logo img {
            display: block;
            margin: 0 auto;
        }
        .fish-item {
            cursor: pointer;
            margin: 5px;
            background-color: white;
            border: 1px solid #000;
            padding: 5px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
  <div class="logo"><img src="https://raw.githubusercontent.com/alternatebummer/games/main/fishingsim/header.png" alt="Header Image"></div>
    <div id="info">
        <p id="clock">Time: 7:10 AM</p>
        <p id="location">Location: Fair Harbour</p>
        <p id="stamina">Stamina: Well rested!</p>
        <p id="wallet">Wallet: $0</p>
        <p id="cargo">Cargo Hold: 0/30 lbs</p>
        <p id="boatName">Boat: Galadriel</p>
    </div>
    <div id="game">
        <h1>Fishing Simulator</h1>
        <p id="message"></p>
        <p id="throwback-message"></p>
        <div id="actions">
            <select id="locationSelect">
                <option value="Fair Harbour">Fair Harbour</option>
                <option value="Hank's Lagoon">Hank's Lagoon</option>
                <option value="Open Sea">Open Sea</option>
            </select>
            <button id="setSail">Set Sail</button>
            <button id="catch" disabled>Catch Fish</button>
            <button id="sleep">Sleep</button>
            <button id="sell" disabled>Fish Market</button>
        </div>
        <div id="inventory"></div>
    </div>

    <script>
        let clockElement = document.getElementById('clock');
        let walletElement = document.getElementById('wallet');
        let boatNameElement = document.getElementById('boatName');
        let locationElement = document.getElementById('location');
        let staminaElement = document.getElementById('stamina');
        let cargoElement = document.getElementById('cargo');
        let messageElement = document.getElementById('message');
        let throwbackMessageElement = document.getElementById('throwback-message');
        let locationSelect = document.getElementById('locationSelect');
        let setSailButton = document.getElementById('setSail');
        let catchButton = document.getElementById('catch');
        let sleepButton = document.getElementById('sleep');
        let sellButton = document.getElementById('sell');
        let inventoryElement = document.getElementById('inventory');

        let time = new Date();
        time.setHours(7, 10);
        let cargo = 0;
        let wallet = 0;
        let inHarbor = true;
        let atFishMarket = false;
        let currentLocation = "Fair Harbour";
        let boatNames = ["Galadriel", "Fishtunnel"];
        let boatName = boatNames[Math.floor(Math.random() * boatNames.length)];
        let inventory = [];
        let fishingTimeout;
        let travelTimeout;
        let lastSleepTime = new Date(time);

        boatNameElement.textContent = `Boat: ${boatName}`;

        function updateClock() {
            time.setMinutes(time.getMinutes() + 5);
            clockElement.textContent = `Time: ${time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
            updateStamina();
        }

        setInterval(updateClock, 2000);

        function updateCargo() {
            cargoElement.textContent = `Cargo Hold: ${cargo}/30 lbs`;
        }

        function updateWallet() {
            walletElement.textContent = `Wallet: $${wallet}`;
        }

        function updateInventory() {
            inventoryElement.innerHTML = '';
            inventory.forEach((fish, index) => {
                let fishItem = document.createElement('div');
                fishItem.classList.add('fish-item');
                fishItem.textContent = `${fish.type}, ${fish.weight} lbs`;
                fishItem.addEventListener('click', () => handleFishClick(index));
                inventoryElement.appendChild(fishItem);
            });
        }

        function updateLocation() {
            locationElement.textContent = `Location: ${currentLocation}`;
            updateLocationSelect();
        }

        function updateLocationSelect() {
            locationSelect.innerHTML = '';
            if (currentLocation !== "Fair Harbour") locationSelect.innerHTML += '<option value="Fair Harbour">Fair Harbour</option>';
            if (currentLocation !== "Hank's Lagoon") locationSelect.innerHTML += '<option value="Hank\'s Lagoon">Hank\'s Lagoon</option>';
            if (currentLocation !== "Open Sea") locationSelect.innerHTML += '<option value="Open Sea">Open Sea</option>';
        }

        function updateStamina() {
            let hoursAwake = (time - lastSleepTime) / 3600000; // Convert milliseconds to hours
            if (hoursAwake < 4) {
                staminaElement.textContent = "Stamina: Well rested!";
                catchButton.disabled = false;
            } else if (hoursAwake < 13) {
                staminaElement.textContent = "Stamina: It's been a long day...";
                catchButton.disabled = false;
            } else {
                staminaElement.textContent = "Stamina: Needs to sleep...";
                catchButton.disabled = true;
            }
        }

        function startFishing() {
            if (staminaElement.textContent.includes("Needs to sleep")) {
                messageElement.textContent = "You are too tired to fish. You need to sleep.";
                return;
            }
            messageElement.textContent = "Currently fishing...";
            throwbackMessageElement.textContent = "";
            catchButton.disabled = true;
            hideButtons();

            let fishingDuration = Math.floor(Math.random() * 11) + 10; // 10 to 20 seconds
            fishingTimeout = setTimeout(() => {
                catchFish();
                showButtons();
            }, fishingDuration * 1000);
        }

        function catchFish() {
            if (cargo < 30) {
                let fishTypes;
                if (currentLocation === "Hank's Lagoon") {
                    fishTypes = [
                        { name: "Trout", minWeight: 1, maxWeight: 6, pricePerLb: 1 },
                        { name: "Bass", minWeight: 4, maxWeight: 20, pricePerLb: 2 }
                    ];
                } else if (currentLocation === "Open Sea") {
                    fishTypes = [
                        { name: "Trout", minWeight: 1, maxWeight: 6, pricePerLb: 1 },
                        { name: "Bass", minWeight: 4, maxWeight: 20, pricePerLb: 2 },
                        { name: "Sturgeon", minWeight: 12, maxWeight: 26, pricePerLb: 3 }
                    ];
                } else if (currentLocation === "Fair Harbour") {
                    fishTypes = [
                        { name: "Boot", minWeight: 5, maxWeight: 5, pricePerLb: 0 }
                    ];
                }

                let fish = fishTypes[Math.floor(Math.random() * fishTypes.length)];
                let weight = Math.floor(Math.random() * (fish.maxWeight - fish.minWeight + 1)) + fish.minWeight;

                if (cargo + weight <= 30) {
                    cargo += weight;
                    inventory.push({ type: fish.name, weight: weight, pricePerLb: fish.pricePerLb });
                    updateCargo();
                    updateInventory();
                    messageElement.textContent = `You caught a ${fish.name} weighing ${weight} lbs.`;
                } else {
                    messageElement.textContent = "Not enough space in the cargo hold.";
                }
            } else {
                messageElement.textContent = "Cargo hold is full.";
            }
            catchButton.disabled = false;
        }

        function setSail() {
            let destination = locationSelect.value;
            let travelDuration;

            if (currentLocation === "Fair Harbour" && destination === "Hank's Lagoon") {
                travelDuration = Math.floor(Math.random() * 11) + 5; // 5 to 15 seconds
            } else if (currentLocation === "Fair Harbour" && destination === "Open Sea") {
                travelDuration = Math.floor(Math.random() * 11) + 20; // 20 to 30 seconds
            } else if (currentLocation === "Hank's Lagoon" && destination === "Open Sea") {
                travelDuration = Math.floor(Math.random() * 6) + 10; // 10 to 15 seconds
            } else if (currentLocation === "Open Sea" && destination === "Hank's Lagoon") {
                travelDuration = Math.floor(Math.random() * 6) + 10; // 10 to 15 seconds
            } else if (currentLocation === "Hank's Lagoon" && destination === "Fair Harbour") {
                travelDuration = Math.floor(Math.random() * 11) + 5; // 5 to 15 seconds
            } else if (currentLocation === "Open Sea" && destination === "Fair Harbour") {
                travelDuration = Math.floor(Math.random() * 11) + 20; // 20 to 30 seconds
            } else {
                return;
            }

            messageElement.textContent = `Traveling to ${destination}...`;
            hideButtons();

            travelTimeout = setTimeout(() => {
                currentLocation = destination;
                updateLocation();
                showButtons();
                messageElement.textContent = `You have arrived at ${destination}.`;
            }, travelDuration * 1000);
        }

        function hideButtons() {
            catchButton.style.display = 'none';
            sleepButton.style.display = 'none';
            setSailButton.style.display = 'none';
            sellButton.style.display = 'none';
        }

        function showButtons() {
            catchButton.style.display = 'inline-block';
            sleepButton.style.display = 'inline-block';
            setSailButton.style.display = 'inline-block';
            sellButton.style.display = (currentLocation === "Fair Harbour") ? 'inline-block' : 'none';
        }

        function sleep() {
            time.setHours(time.getHours() + 7);
            lastSleepTime = new Date(time);
            updateClock();
            updateStamina();
        }

        function openFishMarket() {
            if (currentLocation === "Fair Harbour") {
                atFishMarket = true;
                messageElement.textContent = "Click on a fish in the inventory to sell it.";
            }
        }

        function handleFishClick(index) {
            if (atFishMarket) {
                let fish = inventory[index];
                let earnings = fish.weight * fish.pricePerLb;
                wallet += earnings;
                cargo -= fish.weight;
                inventory.splice(index, 1);
                updateWallet();
                updateCargo();
                updateInventory();
                messageElement.textContent = `You sold a ${fish.type} weighing ${fish.weight} lbs for $${earnings}.`;
                throwbackMessageElement.textContent = "";
                if (inventory.length === 0) {
                    sellButton.disabled = true;
                    atFishMarket = false;
                }
            } else {
                let fish = inventory[index];
                cargo -= fish.weight;
                inventory.splice(index, 1);
                updateCargo();
                updateInventory();
                throwbackMessageElement.textContent = `You threw back a ${fish.type} weighing ${fish.weight} lbs.`;
            }
        }

        setSailButton.addEventListener('click', setSail);
        catchButton.addEventListener('click', startFishing);
        sleepButton.addEventListener('click', sleep);
        sellButton.addEventListener('click', openFishMarket);
    </script>
</body>
</html>
