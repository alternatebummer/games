<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Flight Simulator</title>
    <style>
    body {
        font-family: Arial, sans-serif;
        background-color: #171717;
        color: #fff;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    #game {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        min-height: 100vh;
        max-width: 550px;
        margin: 0 auto;
        padding: 25px 0;
        box-sizing: border-box;
    }
    .button {
        margin: 5px;
        padding: 10px;
        background-color: #444;
        border: none;
        color: #fff;
        cursor: pointer;
    }
    .button:hover {
        background-color: #666;
    }
    #description {
        max-width: 500px;
        font-size: 15px;
        color: lightgrey;
        text-align: justify;
        margin-bottom: 20px;
    }
    #event {
        max-width: 500px;
        margin-top: 20px;
        font-size: 15px;
        color: lightgrey;
        text-align: left;
    }
    #fuel {
        color: #fff;
    }
    img {
        max-width: 100%;
        height: auto;
    }
</style>

</head>
<body>
    <div id="game">
        <img src="https://raw.githubusercontent.com/alternatebummer/games/main/Space%20Traveller/deepspacelogo.png" alt="Deep Space Traveller" style="width: 500px; height: 300px;">
        <div id="start">
            <p id="description">You are far from home, traveller. Your ship's flight computer has calculated a jump path to your planet of origin that elegantly avoids two massive ion storms and an asteroid belt. Unfortunately, it requires far more jumps than your fuel reserves will allow for. You'll have to look for fuel between jumps in order to complete the journey.</p>
            <p>Enter your ship's name:</p>
            <input type="text" id="shipName" placeholder="Ship Name">
            <button class="button" onclick="startGame()">Start Game</button>
        </div>
        <div id="main" style="display:none;">
            <h2 id="shipTitle"></h2>
            <div id="status">
                <p>Jump Fuel: <span id="fuel">5</span></p>
                <p>Credits: <span id="credits">0</span></p>
                <p>Artifacts: <span id="artifacts">0</span></p>
                <p>Jump Path: <span id="jumps">0</span>/40</p>
            </div>
            <div id="options" style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                <button class="button" id="jump-button" onclick="jump()">Jump to New Star System</button>
                <button class="button" id="beacon-button" style="display:none; background-color: red;" onmouseover="this.style.backgroundColor='black'" onmouseout="updateBeaconButton()" onclick="useBeacon()">Use Distress Beacon</button>
            </div>
            <div id="event"></div>
        </div>
    </div>

    <script>
        let fuel = 5;
        let credits = 0;
        let artifacts = 0;
        let jumps = 0;
        let shipName = '';

        function updateStatus() {
            document.getElementById('fuel').textContent = fuel;
            document.getElementById('credits').textContent = credits;
            document.getElementById('artifacts').textContent = artifacts;
            document.getElementById('jumps').textContent = jumps;
            if (fuel === 0) {
                document.getElementById('fuel').style.color = 'red';
                document.getElementById('jump-button').style.display = 'none';
                document.getElementById('beacon-button').style.display = 'block';
            } else {
                document.getElementById('fuel').style.color = 'white';
                document.getElementById('beacon-button').style.display = 'none';
                document.getElementById('jump-button').style.display = 'block';
            }
            updateBeaconButton();
        }

        function showEvent(text, buttons = []) {
            const eventDiv = document.getElementById('event');
            eventDiv.innerHTML = `<p>${text}</p>`;
            buttons.forEach(button => {
                const btn = document.createElement('button');
                btn.className = 'button';
                btn.textContent = button.text;
                btn.onclick = button.onclick;
                eventDiv.appendChild(btn);
            });
        }

        function getRandomEvent() {
            const events = [
                { condition: () => fuel > 0, action: () => { fuel--; showEvent('A raider took 1 unit of jump fuel!'); } },
                { condition: () => credits > 0, action: () => { showEvent('A trader offers to exchange 1 credit for 1 unit of jump fuel. Accept?', [
                    { text: 'Accept', onclick: () => { credits--; fuel++; showEvent('You traded 1 credit for 1 unit of jump fuel.'); updateStatus(); } },
                    { text: 'Decline', onclick: () => { showEvent('You declined the trade.'); } }
                ]); } },
                { condition: () => artifacts > 0, action: () => { showEvent('A trader offers to exchange 1 artifact for 1 credit. Accept?', [
                    { text: 'Accept', onclick: () => { artifacts--; credits++; showEvent('You traded 1 artifact for 1 credit.'); updateStatus(); } },
                    { text: 'Decline', onclick: () => { showEvent('You declined the trade.'); } }
                ]); } },
                { condition: () => credits > 0, action: () => { showEvent('A trader offers to exchange 1 credit for 1 unit of jump fuel. Accept?', [
                    { text: 'Accept', onclick: () => { credits--; fuel++; showEvent('You traded 1 credit for 1 unit of jump fuel.'); updateStatus(); } },
                    { text: 'Decline', onclick: () => { showEvent('You declined the trade.'); } }
                ]); } },
                { condition: () => artifacts >= 2, action: () => { showEvent('An ancient traveller requests all credits, artifacts, and all but 1 unit of jump fuel in exchange for a wormhole jump to a random location along the jump path (between 1 and 40). Accept?', [
                    { text: 'Accept', onclick: () => { credits = 0; artifacts = 0; fuel = 1; jumps = Math.floor(Math.random() * 40) + 1; showEvent(`You are now at ${jumps} jumps.`); updateStatus(); } },
                    { text: 'Decline', onclick: () => { showEvent('You declined the offer.'); } }
                ]); } },
                { condition: () => true, action: () => { fuel += 2; showEvent('You found an asteroid containing 2 units of jump fuel!'); } },
                { condition: () => true, action: () => { artifacts++; showEvent('You found an artifact on a planet!'); } }
            ];
            const availableEvents = events.filter(event => event.condition());
            const randomEvent = availableEvents[Math.floor(Math.random() * availableEvents.length)];
            randomEvent.action();
            updateStatus();
        }

        function jump() {
            if (fuel > 0) {
                fuel--;
                jumps++;
                getRandomEvent();
                updateStatus();
                if (fuel === 0) {
                    document.getElementById('jump-button').style.display = 'none';
                    document.getElementById('beacon-button').style.display = 'block';
                    document.getElementById('fuel').style.color = 'red';
                } else if (jumps >= 40) {
                    showEvent('Congratulations! You made it home!');
                    resetGame();
                }
            } else {
                showEvent('Not enough jump fuel!');
            }
        }

        function useBeacon() {
            const outcomes = [
                () => {
                    showEvent('A strange looking freighter responds to your distress beacon. They give you 3 units of jump fuel in exchange for all your credits and artifacts.');
                    fuel += 3;
                    credits = 0;
                    artifacts = 0;
                    updateStatus();
                },
                () => {
                    document.getElementById('jump-button').style.display = 'none';
                    document.getElementById('beacon-button').style.display = 'none';
                    showEvent('A raider responds to your distress beacon, takes you prisoner, and commandeers your ship. Game over.', [
                        { text: 'Return to Main', onclick: resetGame }
                    ]);
                },
                () => {
                    jumps = Math.floor(Math.random() * 40) + 1;
                    showEvent(`A rogue wormhole opens and takes you to a random location along the jump path (between 1 and 40). You are now at ${jumps} jumps.`);
                    updateStatus();
                }
            ];
            const outcome = outcomes[Math.floor(Math.random() * outcomes.length)];
            outcome();
            if (fuel > 0) {
                document.getElementById('beacon-button').style.display = 'none';
                document.getElementById('jump-button').style.display = 'block';
            }
        }

        function updateBeaconButton() {
            const beaconButton = document.getElementById('beacon-button');
            if (fuel === 0) {
                beaconButton.style.backgroundColor = 'red';
            } else {
                beaconButton.style.backgroundColor = 'blue';
            }
        }

        function startGame() {
            shipName = document.getElementById('shipName').value;
            if (shipName.trim() === '') {
                alert('Please enter a valid ship name.');
                return;
            }
            document.getElementById('shipTitle').textContent = `Ship: ${shipName}`;
            document.getElementById('start').style.display = 'none';
            document.getElementById('main').style.display = 'block';
            updateStatus();
        }

        function resetGame() {
            fuel = 5;
            credits = 0;
            artifacts = 0;
            jumps = 0;
            document.getElementById('main').style.display = 'none';
            document.getElementById('start').style.display = 'block';
            document.getElementById('event').textContent = '';
        }

        updateStatus();
    </script>
</body>
</html>
