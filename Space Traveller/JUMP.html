<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Flight Simulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #171717;
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        #game {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            max-width: 550px;
            margin: 0 auto;
            padding: 25px 0;
            box-sizing: border-box;
        }
        .button {
            margin: 5px;
            padding: 10px;
            background-color: #444;
            border: none;
            color: #fff;
            cursor: pointer;
        }
        .button:hover {
            background-color: #666;
        }
        #description {
            max-width: 500px;
            font-size: 15px;
            color: lightgrey;
            text-align: justify;
            margin-bottom: 15px;
        }
        #event {
            max-width: 500px;
            margin-top: 15px;
            font-size: 15px;
            color: lightgrey;
            text-align: justify;
            padding-left: 5px;
            padding-right: 5px;
        }
        #status p {
            font-size: 18px;
            line-height: 1.2;
        }
        #fuel {
            color: #fff;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        #options {
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 10px;
        }
    </style>
</head>
<body>
    <div id="game">
        <img src="https://raw.githubusercontent.com/alternatebummer/games/main/Space%20Traveller/deepspacelogo.png" alt="Deep Space Traveller" style="width: 500px; height: 300px;">
        <div id="start">
            <p id="description">You are far from home, traveller, low on supplies, but especially low on fuel. Your ship's flight computer is brilliant, but returning to the homeworld will require a mix of wits and automation. The jump path is calculated to avoid instant death as much as possible, but the trip will requires far more jumps than you've ever had to make before... How did you get out here, anyway? You'll have to find fuel between jumps in order to complete the journey. Best of luck, traveller.</p>
            <p>Enter your ship's name:</p>
            <input type="text" id="shipName" placeholder="Ship Name">
            <button class="button" onclick="startGame()">Start Game</button>
        </div>
        <div id="main" style="display:none;">
            <h3 id="shipTitle"></h3>
            <b><div id="starSystemTitle"></div></b>
            <i><div id="starSystemDescription"></div></i>
            <div id="status">
                <br>
                <div>Jump Fuel: <span id="fuel">5</span></div>
                <div>Credits: <span id="credits">0</span></div>
                <div>Artifacts: <span id="artifacts">0</span></div>
                <p>Jump Path: <span id="jumps">0</span>/40</p>
            </div>
            <div id="options">
                <button class="button" id="civ-jump-button" style="display:none;" onclick="jump('civ')">Jump to Civ-Class System</button>
                <button class="button" id="unmapped-jump-button" style="display:none;" onclick="jump('unmapped')">Jump to Unmapped System</button>
                <button class="button" id="beacon-button" style="display:none; background-color: red;" onmouseover="this.style.backgroundColor='black'" onmouseout="updateBeaconButton()" onclick="useBeacon()">Use Distress Beacon</button>
            </div>
            <div id="event"></div>
        </div>
    </div>

    <script>
const starSystems = {
    'Zeballu Prime': 'A bustling hub with vibrant markets.',
    'Homer Nexus': 'Dense asteroid fields with hidden treasures.',
    'Starburnt Reach': 'Bright stars that never set.',
    'Deneb\'s Lattice': 'A web of interstellar trade routes.',
    'Poochi\'s Epsilon': 'Peaceful colony with lush landscapes.',
    'Fourtote\'s Glorius System': 'Known for its shimmering gas giants.',
    'Gamma Eridani': 'A system with a binary sun.',
    'Binary Helios Spilljammers': 'Frequent solar storms and radiation.',
    'Bonebaker Alpha': 'Once a thriving mining colony.',
    'Juno\'s Loose Planetoids': 'Floating islands in a void sea.',
    'Gerbal Expanse': 'Vast, empty, and desolate.',
    'Lyra\'s Veil': 'Mysterious nebula with hidden secrets.',
    'Old Mira\'s Celestial Teddybear': 'A star shaped like a teddy bear.',
    'Nova Orionis': 'Site of a recent supernova.',
    'Omega Trianguli': 'Triangular formation of rare stars.',
    'Pegasus Rift': 'A treacherous expanse with black holes.',
    'Quasar Delta': 'Home to powerful and bright quasars.',
    'Rigel\'s Beacon': 'A guidepost for lost travelers.',
    'Sirius Ascendant': 'Brightest star system in the quadrant.',
    'Tau Ceti': 'Rich in resources and trade.',
    'Ursa Majoris': 'Constellation resembling a great bear.',
    'Vega\'s Spire': 'Tall spire reaching into space.',
    'Wolf 359': 'A system with a red dwarf star.',
    'Xanthe Prime': 'Golden-hued planets orbit here.',
    'Ymir\'s Crown': 'Frozen worlds with icy rings.',
    'Zenith Proxima': 'Closest system to the galactic center.',
    'Aegis Cluster': 'Defensive perimeter of ancient origin.',
    'Borealis Field': 'Colorful auroras light up the sky.',
    'Celestial Forge': 'Known for crafting the finest ships.',
    'Draco\'s Maw': 'Dragon-shaped constellation dominates.',
    'Echo Quadrant': 'Echoes of past battles linger here.',
    'Forsaken Void': 'Abandoned by all known civilizations.',
    'Galatea\'s Eye': 'A massive swirling gas giant.',
    'Helix Nebula': 'Spiral-shaped nebula with rare gases.',
    'Inferno Star': 'Intense heat makes it uninhabitable.',
    'Janus Gate': 'A portal to other dimensions.',
    'Kronos Realm': 'Time behaves oddly in this system.',
    'Lumina Sector': 'Bright and radiant star cluster.',
    'Mistral Expanse': 'Winds howl through hollow moons.',
    'Nebula\'s Cradle': 'Stars are born within this nebula.',
    'Obsidian Belt': 'Black asteroids with a metallic sheen.',
    'Polaris Vortex': 'A swirling maelstrom of star dust.',
    'Quanta Stream': 'Flows of charged particles.',
    'Rhea\'s Ring': 'Ringed planet with lush moons.',
    'Solstice Sector': 'Sunlight never fades in this sector.',
    'Titan\'s Forge': 'Forged in the heat of giant stars.',
    'Umbra Zone Sub-nebula': 'Dark clouds hide ancient secrets.',
    'The Beach': 'Calm and serene with sandy planets.',
    'Wyvern\'s Rest': 'A dragon-like constellation rests here.',
    'Xylon Fields': 'Field of blue-green planets.',
    'Yggdrasil Reach': 'World tree spans multiple planets.',
    'Zenith Spire': 'Tall spires reach for the stars.',
    'Aetherium Nexus': 'Mystical energies flow through here.',
    'Boreal Reach': 'Cold and distant with icy landscapes.',
    'Celestial Axis': 'Stars align in a perfect axis.',
    'Draco\'s Spine': 'Dragon-like formation of stars.',
    'Elysian Drift': 'Calm and peaceful drifting stars.',
    'Flux Arc': 'Arc of unstable and shifting stars.',
    'Gaea\'s Domain': 'Life flourishes on every planet.',
    'Helios Shard': 'Fragments of a shattered sun.',
    'Infernal Rift': 'Flames and lava dominate.',
    'Glottis Arc': 'Mystical and hidden from sight.',
    'Kronos Ascendant': 'Time slows and speeds unpredictably.',
    'Luminous Gate': 'Gateway to brighter star clusters.',
    'Mirage Cluster': 'Stars seem to shift and change.',
    'Nebula\'s Edge': 'Boundary between light and dark.',
    'Ophidian Stream': 'Snake-like path of stars.',
    'Polaris Gate': 'Leading to the north star.',
    'Quasar\'s Call': 'Beacon for distant travelers.',
    'Rho Orionis': 'Hunter constellation dominates.',
    'Seraphim\'s Wing': 'Angelic shapes among the stars.',
    'Tethys Field': 'Oceans on every planet.',
    'Umbra Gate': 'Gateway to shadow realms.',
    'Void Echo Bonefield': 'Bones of ancient ships float.',
    'Wyvern\'s Reach': 'Dragons soar in the starry sky.',
    'Xenon Vortex': 'Gas giants with glowing clouds.',
    'Ymir\'s Shadow': 'Ice worlds cast long shadows.',
    'Bobby\'s Arc': 'Named after an ancient hero.',
    'Aether\'s End': 'End point of mystical energies.',
    'Iron Scale Trinary Pulsars': '3 crazy pulsars zoom around and irritate your eyes.',
    'Kim\'s Spire': 'Tall and majestic space spire.',
    'Nest II, Return of the Nest': 'A nesting ground for avian species.',
    'Elysian Nebula': 'Paradise within a nebula.',
    'Flux Body': 'Bodies of energy shift and change.',
    'Gorgon George\'s Giant Corpse': 'Giant remains float in space.',
    'The Bigtime Stream': 'Constant stream of time particles.',
    'Infernal Arc': 'Arc of fire and brimstone.',
    'Janus Prime': 'Twin planets orbiting a star.',
    'The Long Sun': 'A sun that stretches infinitely.',
    'Luminous Nexus': 'Brilliantly glowing star nexus.',
    'Mirage Vortex': 'Illusions abound in the vortex.',
    'Nebula\'s Daughter': 'Born from the nebula\'s heart.',
    'Ophidian Nexus': 'Center of snake-like star paths.',
    'Polaris Expanse': 'Expansive space near the north star.',
    'Quasar\'s Off Switch': 'Quasar that can be turned off.',
    'Rhea\'s Domain': 'Dominion of the moon goddess.',
    'Seraphim\'s Gate': 'Heavenly gate among the stars.',
    'Tethys Spire': 'Spire rising from the ocean.',
    'Umbra Cluster': 'Cluster shrouded in shadows.',
    'Loyd\'s Void': 'Loyd\'s Void is shaped like Loyd... Weird.'
};

let fuel = 6;
let credits = 1;
let artifacts = 1;
let jumps = 0;
let shipName = '';
let currentStarSystem = '';

function updateStatus() {
    document.getElementById('fuel').textContent = fuel;
    document.getElementById('credits').textContent = credits;
    document.getElementById('artifacts').textContent = artifacts;
    document.getElementById('jumps').textContent = jumps;
    if (fuel === 0) {
        document.getElementById('fuel').style.color = 'red';
        document.getElementById('civ-jump-button').style.display = 'none';
        document.getElementById('unmapped-jump-button').style.display = 'none';
        document.getElementById('beacon-button').style.display = 'block';
    } else {
        document.getElementById('fuel').style.color = 'white';
        document.getElementById('beacon-button').style.display = 'none';
        document.getElementById('civ-jump-button').style.display = 'inline-block';
        document.getElementById('unmapped-jump-button').style.display = 'inline-block';
    }
    updateBeaconButton();
}

function showEvent(text, buttons = []) {
    const eventDiv = document.getElementById('event');
    eventDiv.innerHTML = `<p>${text}</p>`;
    buttons.forEach(button => {
        const btn = document.createElement('button');
        btn.className = 'button';
        btn.textContent = button.text;
        btn.onclick = button.onclick;
        eventDiv.appendChild(btn);
    });
}

function getRandomEvents() {
    const events = [
        { type: 'civ', action: () => { 
            showEvent('A trader local to this system hails and offers to pay you 1 credit for 1 unit of your jump fuel. Accept?', [
                { text: 'Accept', onclick: () => { 
                    if (fuel > 0) { 
                        credits++; 
                        fuel--; 
                        updateResourceLimits();
                        showEvent('You transfer 1 unit of jump fuel to the trader and 1 credit materializes in your account.'); 
                        updateStatus(); 
                    } else { 
                        showEvent('You do not have enough jump fuel.'); 
                    } 
                } },
                { text: 'Decline', onclick: () => { showEvent('You declined the offer.'); } }
            ]); 
        } },
        { type: 'civ', action: () => { 
            showEvent('The jump signature of a familiar trader appears on your sensors. She offers to pay you 1 credit in exchange for an artifact. Sound good?', [
                { text: 'Accept', onclick: () => { 
                    if (artifacts > 0) { 
                        artifacts--; 
                        credits++; 
                        updateResourceLimits();
                        showEvent('You place an artifact on your cargo hold\'s materializer and watch it dematerialize. A bing-bong sound from the cockpit indicates 1 credit has been added to your account.'); 
                        updateStatus(); 
                    } else { 
                        showEvent('You do not have enough artifacts.'); 
                    } 
                } },
                { text: 'Decline', onclick: () => { showEvent('You declined the offer.'); } }
            ]); 
        } },
        { type: 'civ', action: () => {
            showEvent('A shiny freighter jumps into the system. It\'s broadcasting a looped recording: "ATTN all BIOLOGICS: You may purchase 1 artifact or 1 unit of jump fuel for 1 credit! Take it or leave it, helpless species!"', [
                { text: 'Artifact', onclick: () => {
                    if (credits > 0) {
                        artifacts++;
                        credits--;
                        updateResourceLimits();
                        showEvent('You exchange 1 credit for 1 artifact.');
                        updateStatus();
                    } else {
                        showEvent('You do not have enough credits.');
                    }
                } },
                { text: 'Jump Fuel', onclick: () => {
                    if (credits > 0) {
                        fuel++;
                        credits--;
                        updateResourceLimits();
                        showEvent('You exchange 1 credit for 1 unit of jump fuel.');
                        updateStatus();
                    } else {
                        showEvent('You do not have enough credits.');
                    }
                } },
                { text: 'Decline', onclick: () => { showEvent('You declined the offer.'); } }
            ]);
        } },
        { type: 'civ', action: () => {
            if (credits >= 2) {
                showEvent('A very, large, very shiny capital ship decloaks above you. It broadcasts a looped recording: "ATTN little BIOLOGIC: The Galactic Council of World Harvesting Non-Biologics are distributing SURPLUS artifacts. In exchange for Galactic Tax, please accept this pile of ancient manufactured objects from an OBLITERATED SYSTEM."', [
                    { text: 'Accept', onclick: () => {
                        credits = 0;
                        artifacts += 5;
                        updateResourceLimits();
                        showEvent('You lose all your credits and gain 5 artifacts.');
                        updateStatus();
                    } },
                    { text: 'Decline', onclick: () => { showEvent('You declined the offer.'); } }
                ]);
            }
        } },
        { type: 'unmapped', action: () => { 
            if (artifacts >= 2) {
                showEvent('An ancient traveller requests all credits, artifacts, and all but 1 unit of jump fuel in exchange for a wormhole jump to a random location along the jump path (between 1 and 40). Accept?', [
                    { text: 'Accept', onclick: () => { 
                        credits = 0; 
                        artifacts = 0; 
                        fuel = 1; 
                        jumps = Math.floor(Math.random() * 40) + 1; 
                        updateResourceLimits();
                        showEvent(`You are now ${jumps} jumps from where you started.`); 
                        updateStatus(); 
                    } },
                    { text: 'Decline', onclick: () => { showEvent('You declined the offer.'); } }
                ]);
            }
        } },
        { type: 'unmapped', action: () => { 
            showEvent('Sensors have detected a once-inhabited world. You beam an artifact into the cargo hold. It\'s just one artifact. Who\'s going to miss it?');
            artifacts++;
            updateResourceLimits();
            updateStatus();
        } },
        { type: 'unmapped', action: () => { 
            showEvent('Wooonk, wooonk! Sensors have identified the signature of a raider corvette. As is their custom, they rip you off to the tune of 1 of everything you have... Urgh.');
            artifacts--;
            credits--;
            fuel--;
            updateResourceLimits();
            updateStatus();
        } },
{ type: 'unmapped', action: () => { 
            showEvent('The onboard microrefinery bleeps and bloops. Why? It\'s detected a mineral-rich asteroid!. You maneuver it into the cargo bay and the microrefinery renders it down into 2 units of jump fuel!');
            fuel+=2;
            updateResourceLimits();
            updateStatus();
        } },
        { type: 'unmapped', action: () => {
            if (artifacts >= 4) {
                showEvent('Scanners pick up a junky-looking frigate with no jump drive. You hail them, but the reply is unintelligibly muffled. The hull of their craft reads: ART-O-FACTORY REFINER CO. Try giving them an artifact. See what happens, I guess?', [
                    { text: 'Give Artifact', onclick: () => {
                        artifacts--;
                        fuel += 3;
                        updateResourceLimits();
                        showEvent('You lose 1 artifact and gain 3 jump fuel.');
                        updateStatus();
                    } },
                    { text: 'Decline', onclick: () => { showEvent('You declined the offer.'); } }
                ]);
            }
        } }
    ];
    const availableCivEvents = events.filter(event => event.type === 'civ' && (!event.action.toString().includes('credits >= 2') || credits >= 2));
    const availableUnmappedEvents = events.filter(event => event.type === 'unmapped' && (!event.action.toString().includes('artifacts >= 2') || artifacts >= 2) && (!event.action.toString().includes('artifacts >= 4') || artifacts >= 4));
    const civEvent = availableCivEvents[Math.floor(Math.random() * availableCivEvents.length)];
    const unmappedEvent = availableUnmappedEvents[Math.floor(Math.random() * availableUnmappedEvents.length)];
    return { civEvent, unmappedEvent };
}

function updateResourceLimits() {
    fuel = Math.max(0, fuel);
    credits = Math.max(0, credits);
    artifacts = Math.max(0, artifacts);
}

function jump(type) {
    if (fuel > 0) {
        fuel--;
        jumps++;
        const { civEvent, unmappedEvent } = getRandomEvents();
        if (type === 'civ') {
            displayStarSystem();
            civEvent.action();
        } else if (type === 'unmapped') {
            displayStarSystem();
            unmappedEvent.action();
        }
        updateStatus();
        if (fuel === 0) {
            document.getElementById('civ-jump-button').style.display = 'none';
            document.getElementById('unmapped-jump-button').style.display = 'none';
            document.getElementById('beacon-button').style.display = 'block';
            document.getElementById('fuel').style.color = 'red';
        } else if (jumps >= 40) {
            showEvent('Congratulations! You made it home!');
            resetGame();
        }
    } else {
        showEvent('Not enough jump fuel!');
    }
}

function displayStarSystem() {
    const starSystemsKeys = Object.keys(starSystems);
    currentStarSystem = starSystemsKeys[Math.floor(Math.random() * starSystemsKeys.length)];
    document.getElementById('starSystemTitle').textContent = `Star System: ${currentStarSystem}`;
    document.getElementById('starSystemDescription').textContent = starSystems[currentStarSystem];
}

function useBeacon() {
    const outcomes = [
        () => {
            showEvent('A strange looking freighter responds to your distress beacon. They give you 2 units of jump fuel in exchange for all your credits and artifacts.');
            fuel += 2;
            credits = 0;
            artifacts = 0;
            updateResourceLimits();
            updateStatus();
        },
        () => {
            document.getElementById('civ-jump-button').style.display = 'none';
            document.getElementById('unmapped-jump-button').style.display = 'none';
            document.getElementById('beacon-button').style.display = 'none';
            showEvent('A large raider frigate responds to your distress beacon. Oh no. They take you prisoner and commandeer your ship. Game over.', [
                { text: 'Return to Main', onclick: resetGame }
            ]);
        },
        () => {
            jumps = Math.floor(Math.random() * 40) + 1;
            showEvent(`A rogue and unstable wormhole swallows your ship and takes you to a random location along the jump path (between 1 and 40). You are now ${jumps} jumps from where you started.`);
            updateStatus();
        }
    ];
    const outcome = outcomes[Math.floor(Math.random() * outcomes.length)];
    outcome();
    if (fuel > 0) {
        document.getElementById('beacon-button').style.display = 'none';
        document.getElementById('civ-jump-button').style.display = 'inline-block';
        document.getElementById('unmapped-jump-button').style.display = 'inline-block';
    }
}

function updateBeaconButton() {
    const beaconButton = document.getElementById('beacon-button');
    if (fuel === 0) {
        beaconButton.style.backgroundColor = 'red';
    } else {
        beaconButton.style.backgroundColor = 'blue';
    }
}

function startGame() {
    shipName = document.getElementById('shipName').value;
    if (shipName.trim() === '') {
        alert('Please enter a valid ship name.');
        return;
    }
    document.getElementById('shipTitle').textContent = `Ship: ${shipName}`;
    document.getElementById('starSystemTitle').textContent = '';
    document.getElementById('starSystemDescription').textContent = '';
    document.getElementById('start').style.display = 'none';
    document.getElementById('main').style.display = 'block';
    updateStatus();
}

function resetGame() {
    fuel = 6;
    credits = 1;
    artifacts = 1;
    jumps = 0;
    currentStarSystem = '';
    document.getElementById('main').style.display = 'none';
    document.getElementById('start').style.display = 'block';
    document.getElementById('event').textContent = '';
    document.getElementById('starSystemDescription').textContent = '';
}

updateStatus();
</script>
</body>
</html>
